{% extends 'base.html.twig' %}
{% block title %}Les Structures
{% endblock %}
{% block body %}
	<div class="container md-3">
		<h3 class="justify-content-center mt-5" id="title_category">Les Structures
			{% if is_granted('ROLE_ADMIN')  %}
				<a href="{{path('app_registerStructure')}}">
					<i class="fas fa-plus" id="btn_plus"></i>
				</a>
			{% endif %}
		</h3>
	</div>
	<div class="container">
		<button class="btn btn-primary btn-lg my-5" id="actif" type="submit" value="1" placeholder="Search..">Actif</button>
		<button class="btn btn-primary btn-lg my-5" id="inactif" type="submit" value="0" placeholder="Search..">Inactif</button>
	</div>
	<div class="m-5" id="container_table">
		<input class="form-control" id="myInputStructures" type="text" placeholder="Chercher..">
		<table class=" sort table table-striped table-hover table-bordered" id="tableStructures">
			<thead>
				<tr>
					<th scope="col">id</th>
					<th role="columnheader" aria-sort="ascending">Nom enseigne</th>
					<th scope="col" role="columnheader" aria-sort="ascending">Actif</th>
					<th scope="col" role="columnheader" aria-sort="ascending">Email</th>
					<th scope="col" role="columnheader" aria-sort="ascending">Ville</th>
					<th scope="col" role="columnheader" aria-sort="ascending">Téléphone</th>
					<th scope="col" role="columnheader" aria-sort="ascending">Identifiant utilisateur</th>
					<th scope="col" role="columnheader" aria-sort="ascending">Détails</th>
				</tr>
			</thead>
			<tbody id="myTableStructures">
				{% for structure in structures %}
					<tr>
						<th scope="row">{{ structure.id }}</th>
						<td>{{ structure.storeName }}</td>
						<td>
							<form id="target" method="post">
								{% if structure.active == 1 %}
									<p>
										1
									</p>
								{% else %}
									<p>
										0
									</p>
								{% endif %}
							</form>

						</td>
						<td>{{ structure.email }}</td>
						<td>{{ structure.country }}</td>
						<td>{{ structure.phone }}</td>
						<td>{{ structure.user.id}}</td>
						<td>
							<a href="{{path('app_detailsStructure', {id: structure.id})}}">
								<i class="fas fa-eye m-2" id="eye_icon"></i>
							</a>
						</td>
					</tr>
				{% endfor %}
			</tbody>
		</table>
	</div>

	<script>
		$(document).ready(function () {
$("#actif").on("click", function () {
let value = $(this).val();
$("#myTableStructures tr").filter(function () {
$(this).toggle($(this).text().indexOf(value - 1) < 1)
});
});
});
	</script>

	<script>
		$(document).ready(function () {
$("#inactif").on("click", function () {
let value = $(this).val();
$("#myTableStructures tr").filter(function () {
$(this).toggle($(this).text().indexOf(value) > 1)
});
});
});
	</script>

	<script>
		$(document).ready(function () {
$("#myInputStructures").on("keyup", function () {
let value = $(this).val().toLowerCase();
$("#myTableStructures tr").filter(function () {
$(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)
});
});
});
	</script>

{% endblock %}
